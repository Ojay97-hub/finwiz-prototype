import { Transaction } from '@/data/mockData';
import { ShoppingBag, Coffee, Train, Flame, Music, ShoppingCart, ArrowRightLeft } from 'lucide-react';

interface TransactionIconProps {
    transaction: Transaction;
    className?: string;
}

export default function TransactionIcon({ transaction, className = '' }: TransactionIconProps) {
    const { merchant, category } = transaction;
    const lowerMerchant = merchant.toLowerCase();
    const lowerCategory = category.toLowerCase();

    // 1. SALARY (Hand Coins) - SVG includes background
    if (lowerCategory === 'salary' || lowerCategory === 'income' || lowerMerchant.includes('dlx')) {
        return (
            <svg className={className} viewBox="0 0 28.2884 28.2884" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="28.2884" height="28.2884" rx="6" fill="#120048" />
                <path d="M22.4486 13.7286C21.984 13.3712 21.3793 13.2507 20.8132 13.4029L17.5918 14.1436C17.9124 12.7895 16.8852 11.491 15.4938 11.4912H11.6395C10.9857 11.4895 10.3584 11.7493 9.89714 12.2126L8.15555 13.955H5.94662C5.26627 13.955 4.71473 14.5065 4.71473 15.1868V18.2666C4.71473 18.9469 5.26627 19.4985 5.94662 19.4985H13.9539C14.0043 19.4985 14.0544 19.4923 14.1033 19.48L19.0308 18.2481C19.0622 18.2406 19.0929 18.2303 19.1225 18.2173L22.1152 16.9438L22.1491 16.9284C23.4025 16.3021 23.5654 14.5788 22.4516 13.7286H22.4486ZM5.94662 15.1868H7.79446V18.2666H5.94662V15.1868ZM21.6093 15.819L18.6836 17.0647L13.8769 18.2666H9.02635V14.8258L10.7687 13.0842C10.9989 12.8521 11.3126 12.722 11.6395 12.7231H15.4938C16.205 12.7231 16.6495 13.4931 16.2939 14.109C16.1288 14.3948 15.8238 14.5709 15.4938 14.5709H13.338C12.8638 14.5714 12.568 15.085 12.8055 15.4954C12.9155 15.6854 13.1184 15.8026 13.338 15.8028H15.8017C15.8481 15.8027 15.8943 15.7975 15.9396 15.7874L21.0981 14.6009L21.122 14.5948C21.6131 14.4584 22.0677 14.9049 21.9402 15.3984C21.8934 15.5793 21.7724 15.7321 21.607 15.819H21.6093ZM17.3416 10.2593C17.4938 10.2595 17.6457 10.2471 17.7959 10.2223C18.4767 12.2445 21.0912 12.7714 22.5021 11.1707C23.9129 9.57003 23.0619 7.04232 20.9703 6.62082C20.6402 6.5543 20.3008 6.54848 19.9686 6.60365C19.2882 4.58136 16.6737 4.05398 15.2626 5.65439C13.8514 7.2548 14.7019 9.78267 16.7935 10.2046C16.974 10.241 17.1575 10.2593 17.3416 10.2593ZM21.9612 9.33537C21.9612 10.5208 20.678 11.2616 19.6514 10.6689C18.6248 10.0762 18.6248 8.5945 19.6514 8.00181C19.8855 7.86666 20.151 7.79551 20.4213 7.79551C21.2718 7.79551 21.9612 8.48493 21.9612 9.33537ZM17.3416 5.94767C18.0319 5.94802 18.6377 6.40776 18.8237 7.07254C18.1858 7.52137 17.7666 8.21818 17.6688 8.99198C17.5613 9.0152 17.4516 9.02707 17.3416 9.02739C16.1562 9.02658 15.4162 7.74284 16.0096 6.71668C16.2847 6.2411 16.7922 5.94806 17.3416 5.94767Z" fill="#FCFCFD" />
            </svg>
        );
    }

    // 2. AMAZON - Orange Gradient BG + Black Smile
    if (lowerMerchant.includes('amazon')) {
        return (
            <div className={`${className} rounded-xl flex items-center justify-center`} style={{ background: 'linear-gradient(90deg, #FF9900 0%, #FF9900 100%)' }}>
                <svg width="24" height="24" viewBox="0 0 16 14" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-5 h-5">
                    <path d="M15.6805 9.52225V11.7623C15.6805 12.1934 15.2138 12.4628 14.8404 12.2473C14.6672 12.1472 14.5604 11.9624 14.5604 11.7623V10.874L14.4057 11.0294C14.1887 11.2653 11.5812 14.0023 7.28028 14.0023C2.8814 14.0023 0.253541 11.1386 0.143634 11.0168C-0.144659 10.6948 0.0237031 10.1815 0.446691 10.0928C0.642997 10.0516 0.846353 10.1183 0.980153 10.2678C0.999053 10.2923 3.3952 12.8823 7.28028 12.8823C11.1654 12.8823 13.5615 10.2923 13.5853 10.2671C13.5912 10.2597 13.5976 10.2527 13.6042 10.2461L13.7687 10.0823H12.8804C12.4493 10.0823 12.1799 9.61559 12.3954 9.24225C12.4955 9.06899 12.6803 8.96226 12.8804 8.96224H15.1205C15.4297 8.96224 15.6805 9.21297 15.6805 9.52225ZM9.52033 4.37925V3.64213C9.52162 1.70219 7.42237 0.488349 5.7417 1.45721C5.31895 1.70091 4.97606 2.06209 4.75463 2.49691C4.55848 2.88086 4.02026 2.90848 3.78583 2.54664C3.67702 2.37871 3.66608 2.16549 3.75712 1.9873C5.0295 -0.509295 8.52738 -0.692263 10.0533 1.65796C10.4368 2.24863 10.6407 2.93787 10.6404 3.64213V10.0823C10.6404 10.5134 10.1737 10.7828 9.80034 10.5673C9.62707 10.4672 9.52033 10.2823 9.52033 10.0823V9.62516C7.50118 11.5681 4.13593 10.5966 3.46288 7.87652C2.78983 5.15642 5.31377 2.72776 8.00597 3.50493C8.5743 3.66899 9.09408 3.96909 9.52033 4.37925ZM9.52033 7.0022C9.52033 5.06226 7.42029 3.84981 5.74025 4.81977C4.06022 5.78974 4.06022 8.21466 5.74025 9.18463C6.12335 9.40581 6.55792 9.52225 7.00028 9.52225C8.39207 9.52225 9.52033 8.39399 9.52033 7.0022Z" fill="#101010" />
                </svg>
            </div>
        );
    }

    // 3. TRANSFER / REVOLUT - Light Blue/Grey BG + Pink Arrows
    if (lowerCategory === 'transfer' || lowerMerchant.includes('revolut')) {
        return (
            <div className={`${className} rounded-xl flex items-center justify-center bg-[#F3F4F6]`}>
                <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-5 h-5">
                    <path d="M15.4715 12.6201L12.6208 15.4708C12.2326 15.859 11.5699 15.6814 11.4278 15.1512C11.3619 14.9051 11.4322 14.6425 11.6123 14.4624L13.247 12.8286H0.713739C0.16512 12.8286 -0.177767 12.2347 0.0965455 11.7596C0.223858 11.5391 0.459114 11.4032 0.713739 11.4032H13.247L11.6123 9.76943C11.2242 9.38128 11.4018 8.7185 11.932 8.57643C12.1781 8.5105 12.4406 8.58085 12.6208 8.76099L15.4715 11.6117C15.7502 11.8901 15.7502 12.3418 15.4715 12.6201ZM3.06023 6.91872C3.44837 7.30686 4.11115 7.12928 4.25322 6.59906C4.31915 6.35298 4.2488 6.09042 4.06866 5.91028L2.43396 4.27647H14.9673C15.5159 4.27647 15.8588 3.68258 15.5845 3.20746C15.4572 2.98696 15.2219 2.85113 14.9673 2.85112H2.43396L4.06866 1.21731C4.45681 0.829164 4.27922 0.166389 3.749 0.0243141C3.50293 -0.0416234 3.24036 0.0287328 3.06023 0.20887L0.20952 3.05958C-0.0691733 3.33796 -0.0691733 3.78963 0.20952 4.06801L3.06023 6.91872Z" fill="#F472B6" />
                </svg>
            </div>
        );
    }

    // 4. NETFLIX - Black BG + Red Symbol
    if (lowerMerchant.includes('netflix')) {
        return (
            <div className={`${className} rounded-xl flex items-center justify-center bg-black`}>
                <svg width="24" height="24" viewBox="0 0 12 16" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-4 h-5">
                    <path d="M11.5625 0.216158C11.2905 -0.0138193 10.9436 -0.0630902 10.6362 0.084595C9.75938 0.504673 7.98875 1.20943 6 1.20943C4.01125 1.20943 2.24 0.504673 1.36188 0.084595C0.706563 -0.228549 0.000248666 0.366401 0 1.23174V5.52258C0 8.28003 0.603123 10.8813 1.69875 12.8455C2.83375 14.8813 4.36125 16 6 16C7.63875 16 9.16625 14.879 10.3013 12.8455C11.3969 10.8829 12 8.28158 12 5.52411V1.23174C11.9994 0.82503 11.8357 0.444931 11.5625 0.216158ZM11 5.52489C11 8.03614 10.4587 10.3897 9.47688 12.1516C8.53375 13.8419 7.29938 14.7728 6 14.7728C4.70062 14.7728 3.46625 13.8419 2.52312 12.1508C1.54125 10.3874 0.999999 8.03538 0.999999 5.52411V1.23174C1.94437 1.68337 3.84875 2.44043 6 2.44043C8.15125 2.44043 10.0563 1.68337 11 1.23174V5.52489ZM9.875 6.97671C10.1314 7.33207 9.97921 7.8959 9.601 7.99161C9.42546 8.03603 9.24402 7.96179 9.125 7.79686C8.9575 7.56605 8.57187 7.38679 8.25 7.38679C7.92813 7.38679 7.54 7.56682 7.375 7.79686C7.11832 8.15223 6.6454 8.03228 6.52374 7.58095C6.46727 7.37149 6.50587 7.14086 6.625 6.97594C6.98187 6.48507 7.63375 6.15578 8.25 6.15578C8.86625 6.15578 9.51563 6.48584 9.875 6.97671ZM3.75 7.38679C3.42563 7.38679 3.04 7.56682 2.875 7.79686C2.61832 8.15223 2.1454 8.03228 2.02374 7.58095C1.96727 7.37149 2.00587 7.14086 2.125 6.97594C2.48437 6.48507 3.13625 6.15578 3.75 6.15578C4.36375 6.15578 5.01563 6.48507 5.375 6.97594C5.63168 7.3313 5.4796 7.89545 5.10127 7.99142C4.92568 8.03595 4.74412 7.96179 4.625 7.79686C4.46 7.56682 4.07437 7.38679 3.75 7.38679ZM8.52812 10.8636C7.20712 12.7931 4.79288 12.7931 3.47187 10.8636C3.22193 10.5032 3.38264 9.94489 3.76115 9.85863C3.93683 9.8186 4.1165 9.89697 4.2325 10.0642C5.15403 11.4186 6.84597 11.4186 7.7675 10.0642C8.01745 9.70383 8.49059 9.81167 8.61916 10.2583C8.67883 10.4656 8.64413 10.6964 8.52812 10.8636Z" fill="#AE1509" />
                </svg>
            </div>
        );
    }

    // FALLBACKS (Matching style: Rounded Square + Icon)

    // 5. SPOTIFY - Green
    if (lowerMerchant.includes('spotify')) {
        return (
            <div className={`${className} rounded-xl flex items-center justify-center bg-[#10B981] text-white`}>
                <Music className="w-5 h-5" />
            </div>
        );
    }

    // 6. TESCO - Blue
    if (lowerMerchant.includes('tesco') || lowerCategory.includes('groceries')) {
        return (
            <div className={`${className} rounded-xl flex items-center justify-center bg-[#0D5BAB] text-white`}>
                <ShoppingCart className="w-5 h-5" />
            </div>
        );
    }

    // 7. BRITISH GAS / BILLS - Purple
    if (lowerMerchant.includes('gas') || lowerCategory.includes('bills')) {
        return (
            <div className={`${className} rounded-xl flex items-center justify-center bg-[#7167BF] text-white`}>
                <Flame className="w-5 h-5" />
            </div>
        );
    }

    // 8. COSTA / FOOD - Purple/Pink
    if (lowerMerchant.includes('costa') || lowerCategory.includes('food')) {
        return (
            <div className={`${className} rounded-xl flex items-center justify-center bg-[#8F6AFB] text-white`}>
                <Coffee className="w-5 h-5" />
            </div>
        );
    }

    // 9. TRANSPORT - Dark Blue
    if (lowerMerchant.includes('transport') || lowerCategory.includes('transport')) {
        return (
            <div className={`${className} rounded-xl flex items-center justify-center bg-[#3008A3] text-white`}>
                <Train className="w-5 h-5" />
            </div>
        );
    }

    // 10. IKEA - Blue/Yellow
    if (lowerMerchant.includes('ikea')) {
        return (
            <div className={`${className} rounded-xl flex items-center justify-center bg-[#0058A3] text-[#FFDB00]`}>
                <ShoppingBag className="w-5 h-5" />
            </div>
        );
    }

    // DEFAULT
    return (
        <div className={`${className} rounded-xl flex items-center justify-center bg-gray-200 text-gray-500`}>
            <ShoppingBag className="w-5 h-5" />
        </div>
    );
}
